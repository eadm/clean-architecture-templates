# Geminio

![Geminio](/plugins/hh-geminio/img/Geminio.png)

Плагин для генерации кода из freemarker-ных шаблонов

## Зачем

В Android Studio 4.1 отключили поддержку кастомных Freemarker-ных шаблонов. Раньше их можно было создать, положить в
определённую папку внутри Android Studio, и студия самостоятельно подтягивала их в качестве 'Other'-шаблонов.

Начиная с Android Studio 4.1, добавление шаблонов возможно только из IDEA-плагинов. Нас это не устраивает и мы хотим
добавлять / обновлять шаблоны независимо от плагинов.

Для этого и нужен Geminio.

## Содержание

- [Как работает плагин](/plugins/hh-geminio/docs/ru/HOW_IT_WORKS.md)
- [Конфигурация плагина](/plugins/hh-geminio/docs/ru/PLUGIN_CONFIG.md)
- [Выражения](/plugins/hh-geminio/docs/ru/EXPRESSIONS.md)
- [Устройство "рецепта"](/plugins/hh-geminio/docs/ru/RECIPE_CONTENT.md)
- [Шаблоны модулей](/plugins/hh-geminio/docs/ru/MODULES_TEMPLATES.md)

## Информация о форке от WorkinGeeks

Установка и использование:

1. Соберите плагин с помощью graddle task: hh-geminio/intellij/buildPlugin
- Для сборки плагина НЕОБХОДИМО иметь Android Studio версии РОВНО 4.1 (не больше и не меньше)
- Укажите путь к Android Studio 4.1 в классе buildSrc/src/main/kotlin/Versions.kt/Product.Local.ideVersion
2. Установите скомпилированный hh-geminio.zip в Android Studio 4.1+ (плагин тестировался только на 4.1)
с помощью File - Settings... - Plugins - Install plugin from disk...
3. После установки плагина в Settings - Appearance & Behavior появится вкладка Geminio plugin
4. Во вкладке укажите путь к конфигурационному файлу (шаблоны и конфигурационный файл к плагину не прилагаются,
ищите их в другом репозитории). Конфигурационный файл - это файл, похожий на geminio_config.yaml
5. Убедитесь, что сами шаблоны находятся там, где они должны быть, в соответствии с путём, указанным в geminio_config.yaml
6. Перезапустите Android Studio.
7. Выждите около 10 секунд, чтобы дать Android Studio просканировать новые файлы и прочесть содержимое geminio_config.yaml
(самый надёжный признак - это отсутствие каких-либо индикаторов о выполняющихся процессах в статусной строке Android Studio
внизу экрана)
8. Теперь можно протестировать работу плагина:
- В каком-нибудь проекте нажмите правой кнопкой на директории, соответствующей исходному коду для
пакета вашего приложения (например src/main/java/com/workingeeks/testproject)
- Если geminio_config.yaml указан и не содержит ошибок, в пункте New, в конце списка должны быть две группы шаблонов,
указанных в geminio_config.yaml (например, Legacy и Redux).
- Если вместо этих двух групп находятся неактивные группы с именем HH Templates, значит что-то не так с geminio_config.yaml
- Если вместо этих двух групп нет вообще ничего, значит что-то не так с самим плагином, видимо, он работает неправильно
(проверьте, что плагин есть в списке установленных плагинов)
- Если вы видите правильные группы ваших плагинов, выберите любой из шаблонов и нажмите на него.
- Если группы пустые, значит, ваши шаблоны находятся в неправильном месте
- Если всё в порядке, выберите любой шаблон и нажмите на него
- Если recipe.yaml для выбранного шаблона является корректным, вы увидите диалоговое окно (aka Wizard)
- Если диалоговое окно не появилось, значит, что-то не так с recipe.yaml (обратите внимание на нижний-правый угол
Android Studio, скорее всего там сейчас мигает красный восклицательный знак, означающий, что во время работы плагина
произошла ошибка, там могут быть полезные подробности о том, что именно пошло не так)
- Правильно заполните поля в диалоговом окне и нажмите кнопку Finish
- Если файлы шаблона правильные, то шаблон сработает и в проекте появятся новые файлы.
- Если файлы не появились, значит есть ошибка либо в самом шаблоне, либо в recipe.yaml,
который должен быть у каждого шаблона. Снова обратите внимание, есть ли мигающий красный знак в нижнем-правом углу,
скорее всего он есть и вы найдёте там подробности об ошибке.

ВАЖНО:

Для правильной работы шаблонов ВАЖНО, чтобы вы каждый раз щёлкали правой кнопкой на правильной директории
(именно на той, которая соответствует корневому пакету вашего приложения, например com.workingeeks.testproject)